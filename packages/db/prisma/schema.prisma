generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum role {
  student
  teacher
}

enum attendanceStatus {
  present
  absent
}

model User {
  id            String        @id    @default(uuid())
  name          String
  email         String        @unique
  password      String
  role          role

  lecture       Class[]       @relation("teacher")
  attendance    Attendance[]

  class         Class[]        @relation("students")
}

model Class { 
  id            String      @id    @default(uuid())
  className     String
  startedAt     DateTime    @default(now())

  teacherId     String
  teacher       User        @relation("teacher", references: [id], fields: [teacherId])

  students      User[]      @relation("students")

  attendance    Attendance[]
}

model Attendance {
  id            String      @id    @default(uuid())

  classId       String
  class         Class       @relation(references: [id], fields: [classId])

  studentId     String
  student       User        @relation(references: [id], fields: [studentId])

  status        attendanceStatus
}
